/*! Hester Street Collaborative - v1.0.0
 * http://hesterstreet.org/
 * Copyright (c) 2017; * Licensed GPLv2+ */
!function(a){function b(a){var b=new ScrollMagic.Scene({triggerElement:a,duration:a.offsetHeight}).addTo(g);b.on("enter",function(b){-1==a.className.indexOf("is-active")&&(a.className+=" is-active"),c(a,b)}),b.on("leave",function(b){a.className=a.className.split("is-active").join("")})}function c(a,b){var c=a.dataset.geojson;if(c){var f=JSON.parse(c);d("project-features",f),e("project-features");var g=turf.extent(f);h.fitBounds(g,{maxZoom:14,padding:{top:40,bottom:20,left:20,right:20}})}}function d(a,b){h.getSource(a)&&h.removeSource(a),h.addSource(a,{type:"geojson",data:b})}function e(a){h.getLayer("project-polygons")&&h.removeLayer("project-polygons"),h.getLayer("project-points")&&h.removeLayer("project-points"),h.addLayer({id:"project-polygons",type:"fill",source:a,paint:{"fill-color":"#BD319F","fill-opacity":.7,"fill-outline-color":"rgba(0,0,0,0)"},filter:["==","$type","Polygon"]}),h.addLayer({id:"project-points",type:"symbol",source:a,layout:{"icon-image":"hsc_pin","icon-offset":[0,-20],"icon-size":1,"icon-allow-overlap":!0},paint:{},filter:["==","$type","Point"]})}mapboxgl.accessToken="pk.eyJ1Ijoib2JqZWN0aXZlc3ViamVjdCIsImEiOiJPY25wYWRjIn0.AFZPHessR_DGefRkzPilDA";var f=document.querySelectorAll(".project"),g=new ScrollMagic.Controller;if(document.getElementById("archive-project-map")){var h=new mapboxgl.Map({container:"archive-project-map",style:"mapbox://styles/objectivesubject/cj21fglc3004t2sp199kzw03v",center:[-73.98270130711586,40.72701126185467],zoom:11});h.scrollZoom.disable(),h.dragRotate.disable(),h.dragPan.disable(),h.doubleClickZoom.disable(),h.touchZoomRotate.disable(),console.log(h),h.on("load",function(){for(var a=0;f.length>a;a++)b(f[a])})}}();