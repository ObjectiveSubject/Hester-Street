/*! Hester Street Collaborative - v1.0.0
 * http://hesterstreet.org/
 * Copyright (c) 2017; * Licensed GPLv2+ */

!function(a){"use strict";a.document,new Vue({el:"#news-feed",template:"#news-feed-template",data:{loading:!0,queryData:{current_page:1,found_posts:0,total_pages:1},newsPosts:[],currentFilterGroup:"post-type",currentFilters:{postType:"all",date:"all"},filterToggles:[{name:"Post Type",slug:"post-type"},{name:"Date",slug:"date"}],postTypes:[{name:"Event",slug:"event",type:"postType"},{name:"Newsletter",slug:"newsletter",type:"postType"},{name:"Press",slug:"press",type:"postType"},{name:"News",slug:"news-category",type:"postType"}],dates:[{name:"Upcoming",seconds:-1,type:"date"},{name:"Last Month",seconds:2592e3,type:"date"},{name:"Last 3 Months",seconds:7776e3,type:"date"},{name:"Last 6 Months",seconds:15552e3,type:"date"},{name:"Last Year",seconds:31536e3,type:"date"},{name:"Last 3 Years",seconds:94608e3,type:"date"}]},mounted:function(){this.getNews(this.getNewsUrl())},methods:{toggleFilterGroup:function(a){this.currentFilterGroup=a.slug},toggleFilter:function(a){var b=this;a.type&&(this.currentFilters[a.type]&&this.currentFilters[a.type].name!==a.name?this.currentFilters[a.type]=a:this.currentFilters[a.type]="all",setTimeout(function(){b.getNews(b.getNewsUrl())},100))},getNewsUrl:function(a){a=a||1;var b="all_dates",c="all_post_types",d="all_categories";if("all"!==this.currentFilters.date){b=(new Date).getTime()/1e3-this.currentFilters.date.seconds}return"all"!==this.currentFilters.postType&&("event"==this.currentFilters.postType.slug?c="event":(c="post",d=this.currentFilters.postType.slug)),[b,c,d,a].join("/")},getNews:function(a,b){var c=this;this.loading=!0,fetch(HSC.api+"/posts-events/"+a).then(function(a){return a.json()}).then(function(a){c.queryData=a.query,c.newsPosts=b?c.newsPosts.concat(a.posts):a.posts,c.loading=!1}).catch(function(a){console.log("Posts fetch failed",a)})},getMorePosts:function(){var a=this.getNewsUrl(this.queryData.current_page+1);this.getNews(a,"append")}}})}(this);
//# sourceMappingURL=page-news.min.js.map